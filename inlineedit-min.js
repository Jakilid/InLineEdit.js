/* InLineEdit.js version 1.0
 * jQuery inline edit plugin
 * Copyright 2015 Farshad Shahbazi
 * Released under the MIT license
*/
!function(t){t.fn.inLineEdit=function(r){if("undefined"==typeof r||"create"==r)this.each(function(){i(t(this))});else if("destroy"==r)this.each(function(){e(t(this))});else{if("value"==r)return a(this);if("input"==r){var d=[];return this.each(function(){d.push(n(t(this)))}),t(d).map(function(){return this.toArray()})}}return this};var i=function(i){var a,e,n,d=i.text(),s=i.attr("data-title"),o=i.attr("data-minwidth"),h=i.attr("data-maxwidth"),l=i.attr("data-required"),f=0,u=0,c=i.attr("data-type");if(c||(c="text"),o||(o=15),h||(h=170),s?(f=r(i.text(s)),u=r(i,1),i.text(d)):f=o,a=i.attr("data-inlineid"))return l&&t("#"+a).attr("required","1"),void t("#"+a).attr("type",c).val(d).trigger("input");e=Math.floor(1e4*Math.random()),n=t("textarea"==c?"<textarea></textarea>":"<input>"),n.on("focus",function(){t(this).is(":focus")||t(this).select()}).val(d).attr("id",e).attr("type",c).attr("placeholder",s).css("max-width",h+"px").css("min-width",o+"px").width(""==d?f:r(i)).addClass("inlineInput"),"textarea"==c&&n.height(""==d?u:r(i,1)).css("resize","none").css("overflow","hidden"),l&&n.attr("required","1");for(var p=["font","font-famiy","font-size","font-weight","color","padding","padding-top","padding-right","padding-bottom","padding-left","margin","margin-top","margin-right","margin-bottom","margin-left","float","position","display"],g=p.length,v=0;g>v;v++)n.css(p[v],i.css(p[v]));n.insertAfter(i).on("input",function(){i.text(t(this).val()),t(this).width(""==t(this).val()?f:r(i)),"textarea"==c&&t(this).height(""==t(this).val()?u:r(i,1))}),i.attr("data-orgdisplay",i.css("display")).css("display","none").attr("data-inlineid",e),n=null},a=function(i){var a=i.attr("data-inlineid");return a?t("#"+a).val():i.text()},e=function(i){var a=i.attr("data-inlineid");a&&(i.text(t("#"+a).val()),t("#"+a).remove(),i.css("display",i.attr("data-orgdisplay")).removeAttr("data-inlineid").removeAttr("data-orgdisplay"))},n=function(i){var a=i.attr("data-inlineid");if(a)return t("#"+a)},r=function(t,i){var a,e=1==i,n=e?t.height():t.width(),r=t.text(),d=0;return d=r.length-r.trim().length,a=n*d/(e?r.split(/\n/g).length:r.length),a>0&&isFinite(a)&&!isNaN(a)&&(!e||/\n$/g.test(r))&&(n+=a+5),n+1}}(jQuery);